summarize(
across(
c(lpop, lmil, maj, dem),
median
)
),
add = T,
legend = "Median"
)
## plot some outcomes
plot.ibm(
ft,
newdata = ydt |>
ungroup() |>
summarize(
across(
c(lpop, lmil, maj, dem),
mean
)
),
xmax = max(ydt$fat),
legend = "Mean"
)
plot.ibm(
ft,
newdata = ydt |>
ungroup() |>
summarize(
across(
c(lpop, lmil, maj, dem),
median
)
),
add = T,
legend = "Median",
xmax = max(ydt$fat),
)
## plot some outcomes
plot.ibm(
ft,
newdata = ydt |>
ungroup() |>
summarize(
across(
c(lpop, lmil, maj, dem),
mean
),
dem = -8
),
xmax = max(ydt$fat),
legend = "-8",
legend_title = "Polity"
)
plot.ibm(
ft,
newdata = ydt |>
ungroup() |>
summarize(
across(
c(lpop, lmil, maj, dem),
mean
),
dem = 8
),
add = T,
legend = "8",
xmax = max(ydt$fat),
)
plot.ibm(
ft,
newdata = ydt |>
ungroup() |>
summarize(
across(
c(lpop, lmil, maj, dem),
mean
),
lpop = lpop + sd(ydt$lpop)
),
add = T,
legend = "+S.D.",
xmax = max(ydt$fat),
)
## plot some outcomes
plot.ibm(
ft,
newdata = ydt |>
ungroup() |>
summarize(
across(
c(lpop, lmil, maj, dem),
mean
),
lpop = lpop - sd(ydt$lpop)
),
xmax = max(ydt$fat),
legend = "-S.D.",
legend_title = "Population"
)
plot.ibm(
ft,
newdata = ydt |>
ungroup() |>
summarize(
across(
c(lpop, lmil, maj, dem),
mean
),
lpop = lpop + sd(ydt$lpop)
),
add = T,
legend = "+S.D.",
xmax = max(ydt$fat),
)
## plot some outcomes
plot.ibm(
ft,
newdata = ydt |>
ungroup() |>
summarize(
across(
c(lpop, lmil, maj, dem),
mean
),
maj = 0
),
xmax = max(ydt$fat),
legend = "No Maj."
)
plot.ibm(
ft,
newdata = ydt |>
ungroup() |>
summarize(
across(
c(lpop, lmil, maj, dem),
mean
),
maj = 1
),
add = T,
legend = "Maj.",
xmax = max(ydt$fat),
)
ydt |> group_by(year) |> count(maj)
ydt |> group_by(year) |> count(maj) |> plot()
ydt |> group_by(year) |> count(maj) |> view()
ydt |> group_by(year) |> summarize(sum(maj)) |> view()
devtools::document()
## plot some outcomes
plot.ibm(
ft,
newdata = ydt |>
ungroup() |>
summarize(
across(
c(lpop, lmil, maj, dem),
mean
),
maj = 0
),
xmin = min(ydt$fat),
xmax = max(ydt$fat),
legend = "No Maj."
)
plot.ibm(
ft,
newdata = ydt |>
ungroup() |>
summarize(
across(
c(lpop, lmil, maj, dem),
mean
),
maj = 1
),
add = T,
legend = "Maj.",
xmin = min(ydt$fat),
xmax = max(ydt$fat),
)
ft$out |>
ggplot() +
aes(
x = estimate,
y = term,
xmin = estimate - 1.96 * std.error,
xmax = estimate + 1.96 * std.error
) +
geom_pointrange() +
geom_vline(
xintercept = 0,
lty = 2
) +
facet_wrap(~ param)
ll_plot(
10, 10, 10
)
ll_plot(
100, 10, 10
)
ll_plot(
50, 10, 10
)
ll_plot(
50, 20, 10
)
ll_plot(
50, 220, 10
)
ll_plot(
50, 2220, 10
)
ll_plot(
50, 220, 10
)
ll_plot(
50, 50, 50
)
ll_plot(
50, 50, 10
)
ll_plot(
50, 50, 20
)
ll_plot(
50, 50, 10
)
ll_plot(
50, 50, 50,
add = T
)
ll_plot(
50, 50, 5,
add = T
)
## recode some factors before fitting
ydt |>
mutate(
lpop = log(pop),
lmil = log(mil),
post1950 = (year > 1950) + 0
) -> ydt
ibm(
outcome = fat,
mu = ~ lpop + lmil + maj + dem + post1950,
alpha = ~ lpop + lmil + maj + dem + post1950,
theta = ~ lpop + lmil + maj + dem + post1950,
data = ydt,
its = 20
) -> ft
ft$out |>
ggplot() +
aes(
x = estimate,
y = term,
xmin = estimate - 1.96 * std.error,
xmax = estimate + 1.96 * std.error
) +
geom_pointrange() +
geom_vline(
xintercept = 0,
lty = 2
) +
facet_wrap(~ param)
## plot some outcomes
plot.ibm(
ft,
newdata = ydt |>
ungroup() |>
summarize(
across(
c(lpop, lmil, maj, dem, post1950),
mean
),
post1950 = 0
),
xmin = min(ydt$fat),
xmax = max(ydt$fat),
legend = "< 1950"
)
plot.ibm(
ft,
newdata = ydt |>
ungroup() |>
summarize(
across(
c(lpop, lmil, maj, dem, post1950),
mean
),
post1950 = 1
),
add = T,
legend = "> 1950",
xmin = min(ydt$fat),
xmax = max(ydt$fat),
)
ibm(
outcome = fat,
mu = ~ lpop + lmil + maj + dem + post1950,
alpha = ~ lpop + lmil + maj + dem + post1950,
theta = ~ lpop + lmil + maj + dem + post1950,
data = ydt,
its = 2000
) -> ft
ft$out |>
ggplot() +
aes(
x = estimate,
y = term,
xmin = estimate - 1.96 * std.error,
xmax = estimate + 1.96 * std.error
) +
geom_pointrange() +
geom_vline(
xintercept = 0,
lty = 2
) +
facet_wrap(~ param)
## plot some outcomes
plot.ibm(
ft,
newdata = ydt |>
ungroup() |>
summarize(
across(
c(lpop, lmil, maj, dem, post1950),
mean
),
post1950 = 0
),
xmin = min(ydt$fat),
xmax = max(ydt$fat),
legend = "< 1950"
)
plot.ibm(
ft,
newdata = ydt |>
ungroup() |>
summarize(
across(
c(lpop, lmil, maj, dem, post1950),
mean
),
post1950 = 1
),
add = T,
legend = "> 1950",
xmin = min(ydt$fat),
xmax = max(ydt$fat),
)
ll_plot(
50, 50, 10
)
ll_plot(
50, 5, 10,
add = T
)
ll_plot(
50, 1, 10,
add = T
)
ll_plot(
50, 0, 10,
add = T
)
ll_plot(
50, 0.1, 10,
add = T
)
ll_plot(
50, .1, 10
)
ll_plot(
50, 0.1, 5,
add = T
)
ll_plot(
5, 0.1, 5,
add = T
)
source("~/.active-rstudio-document", echo=TRUE)
dim(ydt)
head(ydt)
ps_cite()
ps_cite("peacesciencer")
devtools::document()
## Save the data as .rda file ----
save(
ydt,
here::here("data", "wars.rda")
)
## Save the data as .rda file ----
save(
ydt,
file = here::here("data", "wars.rda")
)
devtools::document()
## Save the data as .rda file ----
save(
ydt,
file = here::here("data", "wars.rda"),
compress = T
)
devtools::document()
source("~/My R Packages/invburreg/invburreg/data_prep.R", echo=TRUE)
## Save the data as .rda file ----
usethis::use_data(wars, overwrite = T)
devtools::document()
?wars
## Setup ----
library(tidyverse)
library(invburreg)
ibm(
outcome = fat,
mu = ~ pop + mil + maj + dem + post1950,
alpha = ~ pop + mil + maj + dem + post1950,
theta = ~ pop + mil + maj + dem + post1950,
data = wars,
its = 2000
) -> ft
devtools::document()
ibm(
outcome = fat,
mu = ~ pop + mil + maj + dem + post1950,
alpha = ~ pop + mil + maj + dem + post1950,
theta = ~ pop + mil + maj + dem + post1950,
data = wars,
its = 2000
) -> ft
ft$out |>
ggplot() +
aes(
x = estimate,
y = term,
xmin = estimate - 1.96 * std.error,
xmax = estimate + 1.96 * std.error
) +
geom_pointrange() +
geom_vline(
xintercept = 0,
lty = 2
) +
facet_wrap(~ param)
## plot some outcomes
plot.ibm(
ft,
newdata = ydt |>
ungroup() |>
summarize(
across(
c(lpop, lmil, maj, dem, post1950),
mean
),
post1950 = 0
),
xmin = min(ydt$fat),
xmax = max(ydt$fat),
legend = "< 1950"
)
## plot some outcomes
plot.ibm(
ft,
newdata = ydt |>
ungroup() |>
summarize(
across(
c(pop, mil, maj, dem, post1950),
mean
),
post1950 = 0
),
xmin = min(ydt$fat),
xmax = max(ydt$fat),
legend = "< 1950"
)
## plot some outcomes
plot.ibm(
ft,
newdata = wars |>
ungroup() |>
summarize(
across(
c(pop, mil, maj, dem, post1950),
mean
),
post1950 = 0
),
xmin = min(ydt$fat),
xmax = max(ydt$fat),
legend = "< 1950"
)
plot.ibm(
ft,
newdata = wars |>
ungroup() |>
summarize(
across(
c(pop, mil, maj, dem, post1950),
mean
),
post1950 = 1
),
add = T,
legend = "> 1950",
xmin = min(ydt$fat),
xmax = max(ydt$fat),
)
usethis::use_data_raw("wars")
devtools::document()
devtools::document()
devtools::document()
